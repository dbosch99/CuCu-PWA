<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>CuCu</title>
  <meta name="theme-color" content="#007bff">

  <!-- Manifest -->
  <link rel="manifest" href="./manifest.json">

  <!-- Icona iOS (apple touch) -->
  <link rel="apple-touch-icon" sizes="1024x1024" href="./cucu-1024.png">

  <!-- Icone PWA (Android/Chromium) -->
  <link rel="icon" type="image/png" sizes="192x192" href="./cucu-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="./cucu-512.png">

  <!-- Open Graph -->
  <meta property="og:title" content="CuCu">
  <meta property="og:image" content="./cucu-1024.png">
  <link rel="image_src" href="./cucu-1024.png">

  <!-- Stili e script -->
  <link rel="stylesheet" href="./styles.css">
  <script defer src="./jszip.min.js"></script>
  <script defer src="./script.js"></script>
</head>
<body>
  <div class="container">
      <h1 class="title-row">
        Instagram CuCu
        <button
          id="infoBtn"
          class="info-button"
          aria-label="Instructions"
          title="Instructions"
          type="button"
        >
          i
        </button>
      </h1>
    <p id="tagline">See who doesn't follow you back!</p>

    <div class="button-group">
      <label for="fileInput" class="button button--gray" id="fileLabel">Select ZIP</label>
      <input type="file" id="fileInput" accept=".zip" style="display:none;">
      <button id="processBtn" class="button button--gray-light is-disabled" disabled>Run</button>
      <button id="refreshBtn" class="button button--success" title="Refresh">Refresh</button>
    </div>

    <h2 id="resultTitle" style="display:none;">
      Not following back or inactive: <span id="resultCount">0</span>
    </h2>
    <p id="tapHint" style="display:none;">
      Tap on the progressive number to mark inactive profiles
    </p>
    <ul id="resultList"></ul>
  </div>
  
  <!-- Instructions Overlay -->
  <div id="instructionsOverlay" class="instructions-overlay" aria-hidden="true">
      <div class="instructions-content">
        <p style="text-align:center; margin-bottom:12px;">
          Developer page:
          <a
            href="https://github.com/dbosch99"
            target="_blank"
            rel="noopener noreferrer"
          >
            https://github.com/dbosch99
          </a>
        </p>

        <hr>

        <h2>Instructions</h2>

        <h3>EN</h3>

        <p>
          This app compares your followers and following lists and returns the profiles that do not follow you back.
          These lists can be downloaded from the Instagram app by following the steps below:
        </p>

        <ol>
        <li>Open Instagram and go to your profile</li>
        <li>Tap ☰ in the top right corner and select "Account Centre"</li>
        <li>Select "Your information and permissions"</li>
        <li>Select "Export your information", then "Create export" and "Export to device"</li>
        <li>Select "Customise information", clear everything except "Followers and Following", then tap "Save"</li>
        <li>Select "Date range", choose "All time" and tap "Save"</li>
        <li>Select "Start export", enter your password and tap "Continue"</li>
        <li>After about 5–10 minutes, a "Download" button will appear next to "Cancel". You will also receive a confirmation email</li>
        <li>Download the file. By default it is a .ZIP file. If your browser extracts it automatically, compress it again manually into .ZIP format</li>
        <li>Open the CuCu app, tap "Select ZIP", choose the downloaded .ZIP file and press "Run"</li>
      </ol>

      <p><strong>Note:</strong><br>
        The list may include profiles that have been closed or deleted. Tapping them will show
        "The profile you are looking for does not exist".
        To exclude them from the count, mark them inactive by tapping the progressive number.
      </p>

      <hr>

      <h3>IT</h3>

      <p>
        Questa app confronta la lista dei follower e dei profili seguiti e restituisce l'elenco dei profili che non ricambiano il follow.
        Queste liste si scaricano dall'app Instagram seguendo questi passaggi:
      </p>

      <ol>
        <li>Apri Instagram e vai nel tuo profilo</li>
        <li>Tocca ☰ in alto a destra e seleziona "Centro gestione account"</li>
        <li>Seleziona "Le tue informazioni e autorizzazioni"</li>
        <li>Seleziona "Esporta le tue informazioni", poi "Crea esportazione" e "Esporta sul dispositivo"</li>
        <li>Seleziona "Personalizza informazioni", deseleziona tutto tranne "Follower e persone/Pagine seguite" e premi "Salva"</li>
        <li>Seleziona "Intervallo di date", scegli "Sempre" e premi "Salva"</li>
        <li>Seleziona "Avvia esportazione", inserisci la password e premi "Continua"</li>
        <li>Dopo circa 5–10 minuti comparirà il tasto "Download". Riceverai anche una mail di conferma</li>
        <li>Scarica il file. Di default è un file .ZIP. Se il browser lo decomprime automaticamente, comprimilo manualmente in formato .ZIP</li>
        <li>Apri l'app CuCu, seleziona "Select ZIP", scegli il file .ZIP e premi "Run"</li>
      </ol>

      <p><strong>Nota:</strong><br>
        L'elenco può includere profili che hanno chiuso o cancellato l'account.
        Per escluderli dal conteggio, evidenziali in rosso toccando il numero progressivo.
      </p>

      <button id="closeInstructions" class="button button--primary">Close</button>
    </div>
  </div>

  <!-- Registrazione Service Worker per GitHub Pages (/CuCu-PWA) -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker
          .register('./service-worker.js', { scope: './' })
          .catch(console.error);
      });
    }
  </script>
</body>
</html>
